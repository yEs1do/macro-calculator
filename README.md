# 🎯 宏观阵型 Delta 计算器 (Macro Formation Delta Calculator)

> **“在量化执行阶段，精确到每一元的调仓是抗衡交易情绪的最后一道防线。”**

本仓库是 [🌌 宏观动量双轨制量化实盘系统](https://github.com/yEs1do/Nasdaq_per_Oz) 的官方配套执行终端。它是一个纯静态、高性能的调仓计算工具，旨在解决量化信号产生后，如何将“比例建议”快速转化为“挂单金额”的实战痛点。

---

## 🛠️ 核心功能 (Core Features)

* **Delta 差额算法**：输入当前各资产实盘余额，自动计算与目标阵型之间的“Delta（差额）”，直接给出买入/卖出建议。
* **动态金价锚定**：通过 URL 参数无缝接收来自 Python 后端的实时人民币金价数据。
* **实物金记忆锚点**：利用浏览器 `LocalStorage` 存储实物金/积存金克数，确保隐私的同时实现“一次输入，永久记忆”。
* **100元交易阈值**：自动忽略小于 100 元的净值漂移，减少频繁调仓产生的滑点损失。
* **云端防缓存**：内置强力 `Cache-Control` 协议，确保终端始终加载最新策略逻辑。

---

## 🏗️ 阵型逻辑 (Formation Logic)

计算器严格遵循双轨制系统的两套标准作战阵型，顺序固定为：

### 🟩 进攻期 (Attack Mode)
当纳指/黄金比价站上 MA200，系统追求超额收益：
1. **现金/短债**: 10% (机动部队)
2. **红利/长债**: 10% (防御补充)
3. **纳指 ETF**: 60% (核心主力)
4. **黄金资产**: 20% (侧翼掩护)

### 🟥 防御期 (Defense Mode)
当比价跌破 MA200，系统启动避险机制：
1. **现金/短债**: 30% (流动性堡垒)
2. **红利/长债**: 20% (抗通胀防线)
3. **纳指 ETF**: 10% (保留观察仓)
4. **黄金资产**: 40% (核心避险)

---

## 🚀 部署与使用 (Deployment)

1.  **托管**：本项目建议托管于 **GitHub Pages**。
2.  **调用**：由主仓库脚本自动生成带金价参数的链接：
    `https://yEs1do.github.io/macro-calculator/?gold=XXX.XX`
3.  **执行流程**：
    * 点击钉钉推送链接。
    * 填入证券账户当前各品种市值。
    * 按计算器给出的红色（卖出）和绿色（买入）指令进行挂单。

---

## 🔒 隐私与安全 (Privacy)

* **零服务器交互**：所有计算均在您的设备本地完成，不上传任何资产数据。
* **本地存储**：实物金克数仅存储于您设备本地的浏览器安全沙盒中。

---

## ⚖️ 免责声明 (Disclaimer)

本工具仅作为计算辅助，不构成任何投资建议。量化交易存在风险，执行调仓前请务必确认资金分配符合您的风险承受能力。**“策略有价，风险自担。”**
